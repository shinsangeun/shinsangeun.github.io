{"componentChunkName":"component---src-templates-post-template-js","path":"/posts/react/react-env","result":{"data":{"markdownRemark":{"id":"c571d81c-ee89-520f-9835-f073722d3f79","html":"<p>안녕하세요!</p>\n<p>이번 포스팅 에서는 배포 환경에 따라 CRA(Create-React-App)로 생성한 <code class=\"language-text\">React.js</code> 프로젝트 에서 환경 변수를 설정하는 방법에 대해 알아보겠습니다.</p>\n<hr>\n<h3 id=\"1-개요\" style=\"position:relative;\"><a href=\"#1-%EA%B0%9C%EC%9A%94\" aria-label=\"1 개요 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>1. 개요</h3>\n<ul>\n<li>프로젝트를 개발하다 보면, 배포 환경에 따라 환경변수를 다르게 셋팅 해야 할 경우가 있습니다.</li>\n<li>예를 들어, API 주소를 호출 할 때도 운영 API 주소는 <code class=\"language-text\">api.example.com</code> 이고 개발 API 주소는 <code class=\"language-text\">apidev.example.com</code> 일 때 배포 환경에 따라 호출 URL을 바꿔서 호출해 줘야 합니다. 또한 개발용 포트는 3000번으로 띄우고 싶은데, 운영 서버용 포트는 3001번으로 사용하고 싶은 경우가 있습니다.</li>\n<li>따라서 배포 환경에 따라 환경 변수를 다르게 설정해 줘야 하므로 적용 하는 방법을 아래 정리해 보겠습니다.</li>\n</ul>\n<h3 id=\"2-reactjs-설정-방법\" style=\"position:relative;\"><a href=\"#2-reactjs-%EC%84%A4%EC%A0%95-%EB%B0%A9%EB%B2%95\" aria-label=\"2 reactjs 설정 방법 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>2. React.js 설정 방법</h3>\n<ul>\n<li>React.js를 사용할 때 <code class=\"language-text\">CRA(Create-React-App)</code> 프로젝트로 만들어서 적용 하였습니다.</li>\n<li>환경 변수를 셋팅 하기 위해서는 자신의 프로젝트 루트 경로에 파일을 생성 합니다. <code class=\"language-text\">.env</code>, <code class=\"language-text\">.env.development</code>, <code class=\"language-text\">.env.local</code>, <code class=\"language-text\">.env.production</code>, <code class=\"language-text\">.env.test</code> 여러가지 종류가 있는데 본인이 사용하는 용도에 따라 필요한 파일을 생성 합니다.\n<span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 450px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/d49845330773a6201d4d7a524629e268/fc2a6/react-env.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 31.25%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAGCAYAAADDl76dAAAACXBIWXMAABYlAAAWJQFJUiTwAAAA10lEQVQY041R2W7CMBDkrwoNgXA4hx18JnFIQEjwwP9/wXTtUlRVDeJhNGPv7mhXM0vWG3yuMiQE5UdUtUBjOPKKI9SmsMy233OP9zxdo+ACsx/D0OAvN5TSQDkPITU+knQSCzJ4LvOfYeD2fEVFRtJYcOK2H6BdC9f1pI+wrYdpuvi/zcun6aShGy8oahm3KwMrE7VQGso2OBgHflDEFtmOYfHq5MDD7Q6ubdxE0rDrfEQ/niL7YYTzfex962RNoTBeI6dCQEF6X/LIrBJgpBmF9TeQ34ZfmwTaSPrnBt0AAAAASUVORK5CYII='); background-size: cover; display: block;\"\n  ></span>\n  <picture>\n          <source\n              srcset=\"/static/d49845330773a6201d4d7a524629e268/8ac56/react-env.webp 240w,\n/static/d49845330773a6201d4d7a524629e268/8626f/react-env.webp 450w\"\n              sizes=\"(max-width: 450px) 100vw, 450px\"\n              type=\"image/webp\"\n            />\n          <source\n            srcset=\"/static/d49845330773a6201d4d7a524629e268/8ff5a/react-env.png 240w,\n/static/d49845330773a6201d4d7a524629e268/fc2a6/react-env.png 450w\"\n            sizes=\"(max-width: 450px) 100vw, 450px\"\n            type=\"image/png\"\n          />\n          <img\n            class=\"gatsby-resp-image-image\"\n            src=\"/static/d49845330773a6201d4d7a524629e268/fc2a6/react-env.png\"\n            alt=\"react_env\"\n            title=\"react_env\"\n            loading=\"lazy\"\n            style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n          />\n        </picture>\n  </a>\n    </span></li>\n<li>생성한 파일의 우선순위는 빌드 종류 별로 적용 됩니다. (왼쪽이 우선순위가 더 높습니다.)</li>\n</ul>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">start: .env.development &gt; .env \nbuild: .env.production &gt; .env.development\ntest: .env.test &gt; .env </code></pre></div>\n<p>(ex1) .env 파일</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">REACT_APP_API_URL = https://api.example.com\nREACT_APP_PORT = 3000</code></pre></div>\n<p>(ex2) .env.development 파일</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">REACT_APP_API_URL = https://api.example.com\nREACT_APP_PORT = 3001</code></pre></div>\n<ul>\n<li>소스 코드에서 환경 변수를 호출 하기 위해서는 변수 앞에 <code class=\"language-text\">process.env</code>를 붙여 줍니다.</li>\n<li>저는 재사용성을 위해서 전역 변수로 선언하고 사용 하였습니다. (개인의 취향에 따라 선언 하시면 됩니다.)</li>\n</ul>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">const API_URL = process.env.REACT_APP_API_URL;\naxios(API_URL, ...)</code></pre></div>\n<ul>\n<li><strong>package.json</strong>에 있는 scripts를 보면, 자신이 생성한 환경 변수에 따라 빌드 할 수 있습니다.</li>\n</ul>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">&quot;scripts&quot;: {\n    &quot;start&quot;: &quot;react-scripts start&quot;,\n    &quot;build&quot;: &quot;react-scripts build&quot;,\n    &quot;test&quot;: &quot;react-scripts test&quot;,\n    &quot;eject&quot;: &quot;react-scripts eject&quot;\n}</code></pre></div>\n<ul>\n<li>여기에서 특정 환경 변수의 우선순위를 강제로 높여서 빌드를 하고 싶을 경우에는 <code class=\"language-text\">env-cmd -f</code> 명령어를 추가하여 빌드를 실행 합니다.</li>\n<li>먼저 <strong>npm i env-cmd</strong> 로 env-cmd 라이브러리를 설치 해야 합니다. 라이브러리를 추가한 이후에 아래 명령어를 추가해서 테스트 합니다. (콘솔에 환경 변수를 출력해서 제대로 적용이 되었는지 확인 합니다.)</li>\n<li>start 스크립트의 환경 변수 우선 순위가 <code class=\"language-text\">.env.development</code>가 더 높은데, <code class=\"language-text\">.env</code>로 적용 하고 싶으면 아래와 같이 스크립트를 수정 합니다. </li>\n</ul>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">&quot;start&quot;: &quot;env-cmd -f .env react-scripts start&quot;,</code></pre></div>\n<ul>\n<li>로컬 개발과 배포 빌드 start 스크립트를 다르게 설정 하고 싶을 경우에는 스크립트 실행 이름을 아래와 같이 설정 할 수도 있습니다.</li>\n</ul>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">&quot;start&quot;: &quot;react-scripts start&quot;,\n&quot;start:prod&quot;: &quot;env-cmd -f .env react-scripts start&quot;,</code></pre></div>\n<h3 id=\"3-마치며\" style=\"position:relative;\"><a href=\"#3-%EB%A7%88%EC%B9%98%EB%A9%B0\" aria-label=\"3 마치며 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>3. 마치며</h3>\n<ul>\n<li>다음 포스팅에서는 React.js와 비교해서 Next.js에서 환경 변수 셋팅하는 방법을 정리해 보겠습니다.</li>\n<li>내용이 도움이 되셨다면 아래 <strong>좋아요</strong>나 <strong>댓글</strong> 부탁 드립니다!👍🏻</li>\n</ul>\n<hr>\n<p>오늘 준비한 내용은 여기까지 입니다.<br>\n이번 포스팅이 도움이 되셨거나 궁금한 점이 있으시다면 언제든지 댓글을 달아주세요!🙋🏻‍♀️✨    </p>","fields":{"slug":"/posts/react/react-env","tagSlugs":["/tag/react/","/tag/env/","/tag/deploy/","/tag/react-scripts/"]},"frontmatter":{"date":"2021-12-10 12:47:20","description":"안녕하세요! 이번 포스팅 에서는 `React.js` 배포 환경에 따른 환경 변수 셋팅 방법에 대해 알아보겠습니다.","tags":["React","env","deploy","react-scripts"],"title":"[React] 배포 환경에 따라 환경 변수(env) 셋팅하기","socialImage":null}}},"pageContext":{"slug":"/posts/react/react-env"}},"staticQueryHashes":["251939775","401334301","825871152"]}